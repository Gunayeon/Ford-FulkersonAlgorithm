# Ford-FulkersonAlgorithm

Ford-Fulkerson Algorithm은 residual network를 활용해 최대유량을 구하는 기법이다. 이때 최대유량이 무엇인지 생소할 수도 있는데 최대 유량을 먼저 설명해보자면 각각의 간선이 용량을 갖는 방향성 그래프인 유량네트워크가 있는데, 유량네트워크에서 주어진 두 정점 사이의 최대유량을 찾는것이 최대유량문제이다. 예를들자면 송유관 네트워크에서 두 도시 사이에보낼 수 있는 석유의 양, 도로교통망에서 두 도시 사이를 이동할 수 있는 시간당 차량의 수 등이 있겠다. Ford-Fulkerson Algorithm을 이해하기 위해 간단한 개념먼저 설명하고자 한다.

## 유량 네트워크의 속성
* c(u,v):정점 u에서 v로 가는 간선의 용량(capacity)
* f(u,v):정점 u에서 v로 실제로 흐르는 유랑(flow)
 
 ### 유량 네트워크가 만족해야하는 조건
 * 용량 제한 속성:f(u,v)<=c(u,v)
 > 흐르는 유랑이 용량을 초과하면 안됨.
 * 유량의 대칭성:f(u,v)=-f(v,u)
 > u에서 v로 유랑이 흐르면 v에서 u로 음수의 유랑이흐르는 것과 동일
 * 유량의 보존:
 >각 정점에 들어오는 유랑과 나가는 유량은 같음
 
 위의 개념의 이해를 바탕으로 본격적으로 Ford-Fulkerson Algorithm에 대한 설명과 동적원리에 대히 설명하고자 한다.
 
## Ford-Fulkerson Algorithm
 * 소스노드(=출발점)에서 시작해서 싱크노드(=도착지)로 도착하는 유량
 > 유량 네트워크의 모든간선의 유량을 0으로 초기화
 > 소스에서 싱크로 유랑을 더 보낼 수 있는 경로를 찾아 유량 보내기를 반복

 ### Ford-Fulkerson Algorithm의 동작특성
 * 간선당 용량을 입력받은 상태, 초기유량은 전부 0으로 초기화
 > 이때 이 예시에서 소스노드는 1번, 싱크노드는 4번으로 가정하고 증가경로를 탐색함
 * 잔여유량=간선의 용량-흐르는 용량(r(u,v)=c(u,v)-f(u,v))
 > 증가경로에 포함된 간선의 잔여유량을 구한 후 각 간선의 잔여유량 중 가장 작은 값이 증가경로를 따라 흘려보내는 유량
 > 
 > 증가경로는 DFS, BFS를 통해 탐색.


 * 증가경로 탐색->(1-2-3-4)(DFS방법사용)
 * 간선당 용량을 입력받은 상태, 초기유량은 전부 0으로 초기화
 
 ![사진](https://blog.kakaocdn.net/dn/Azwr1/btqIktUB1I7/nV04kVO9J9iUUjJsKkkpKK/img.png)
   
 > r(1,2)=c(1,2)-f(1,2)=1-0=1
 >
 > r(2,3)=c(2,3)-f(2,3)=1-0=1
 >
 > r(3,4)=c(3,4)-f(3,4)=2-0=2
 따라서 증가경로(1,2,3,4)에 흐르는 유량은 1.
 
 * 다음으로 만들어질 수 있는 증가경로는 (1,3,4). <용량제한속성>
 
 ![사진](https://blog.kakaocdn.net/dn/A4D0t/btqIs9OP3XB/2xzBEgzPzNNc6O4kBa1DY0/img.png)
 
 >r(1,3)=c(1,3)-f(1,3)=3
 >
 >r(3,4)=c(3,4)-f(3,4)=2-1=1 1만큼 추가

 ![사진](https://blog.kakaocdn.net/dn/R6TyF/btqIvD3agOL/xCONMsyUbmcRfom6XbKa21/img.png)
 
 * 이때 만들수있을 증가경로는 없을거 같지만, 다음 증가경로를 정하기 위해 유량의 대칭성 f(u,v)=-f(v,u)을 이용하면 증가경로(1,3,2,4)를 만들 수 있다.
   간선(2,3)을 대칭으로 f(2,3)=-f(3,2) 간선은 없어서 c(3,2)=0이지만 f(3,2)=-1 따라서 간선(3,2)의 잔여유량은 r(3,2)=c(3,2)-f(3,2)=0-(-1)=1
   
 > r(1,3)=c(1,3)-f(1,3)=3-1=2
 > 
 > r(3,2)=c(3,2)-f(3,2)=1
 > 
 > r(2,4)=c(2,4)-f(2,4)=1-0=1  1만큼 추가

 ![사진](https://blog.kakaocdn.net/dn/cdwz2X/btqIvFfzZ6r/WLHoAMVyHppR68oQaI85zK/img.png)
 
  간선(2,3)을 대칭으로 f(2,3)=-f(3,2) 상쇄시켰기 때문에 다음과 같이 나타나진다.
  
  ![사진](https://blog.kakaocdn.net/dn/bPNTPA/btqIwDWasV4/cui76uE6xK89xmiuKT76kK/img.png)
 
 ### 성능분석
 Ford-Fulkerson Algorithm 시간복잡도: 
 * DFS를 이용하는 경우: 최대 유랑이 f라면 각 증가 경로 당 유랑이 최소 1이기 때문에 증가 경로의 최대 계수는 f.
 하나의 증가 경로를 찾는데 방문하는 정점과 간선은 최대로 계산할 시 각각 V,E
 ->최대유랑을 얻어내는데 필요헌 시간 복잡도는 O(|E|+|V|f) 정점의 개수가 무시할만큼 작다면 O(|E|f)

